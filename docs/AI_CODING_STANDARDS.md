# הוראות ותקנים לכתיבת קוד (AI Coding Standards)

מסמך זה מרכז את ההנחיות והסטנדרטים המחייבים לכתיבת קוד בפרויקט "מערכת בוגרים".
על כל סוכן AI (או מפתח אנושי) לפעול בהתאם להנחיות אלו כדי לשמור על קוד נקי, מאובטח ואחיד.

## 1. עקרונות כלליים (General Principles)

- **KISS (Keep It Simple, Stupid)**: העדיפו פתרונות פשוטים וקריאים על פני לוגיקה מורכבת ומיותרת.
- **Security First**: אבטחה היא לא פיצ'ר נוסף, היא הבסיס. כל קלט משתמש חייב לעבור אימות (Validation) וחיטוי (Sanitization).
- **מודולריות**: חלקו את הקוד לפונקציות קטנות ורכיבים לשימוש חוזר. אל תשכפלו קוד (DRY).
- **שפה**: הערות בקוד (Comments) ושמות של משתנים/פונקציות יהיו באנגלית בלבד. תיעוד חיצוני (כמו מסמך זה) יכול להיות בעברית.

## 2. צד שרת (Backend - PHP)

- **גרסה**: PHP 8.1 ומעלה.
- **Strict Types**: חובה להוסיף `declare(strict_types=1);` בראש כל קובץ PHP.
- **Standards**: הקפידו על תקן **PSR-12** לעיצוב הקוד.
- **מסד נתונים**:
  - השתמשו אך ורק ב-**PDO** עם **Prepared Statements**.
  - איסור מוחלט על שרשור מחרוזות לתוך שאילתות SQL (למניעת SQL Injection).
- **טיפול בשגיאות**:
  - השתמשו ב-`try-catch` בלוקים.
  - אל תחשפו שגיאות מערכת (Stack Traces) למשתמש, אלא החזירו הודעת שגיאה כללית ב-JSON ורשמו את השגיאה המלאה ללוג בצד השרת.
- **תגובות API**: כל התגובות חייבות לחזור בפורמט JSON אחיד. לדוגמה:
  ```json
  {
    "success": true,
    "data": { ... }
  }
  ```
  או במקרה שגיאה:
  ```json
  {
    "success": false,
    "error": "Message description"
  }
  ```

## 3. צד לקוח (Frontend - React/TypeScript)

- **TypeScript**:
  - השתמשו ב-Strict Mode.
  - **אסור להשתמש ב-`any`**. הגדירו `interface` או `type` לכל אובייקט, prop, או תגובת שרת.
- **רכיבים (Components)**:
  - השתמשו ב-Functional Components בלבד עם Hooks.
  - שמרו על רכיבים קטנים וממוקדים (Single Responsibility).
- **עיצוב (Styling)**:
  - השתמשו ב-**TailwindCSS** עבור עיצוב.
  - הימנעו ככל הניתן מ-Inline Styles (`style={{ ... }}`).
- **ניהול מצב (State)**:
  - השתמשו ב-`useState` למצבים מקומיים פשוטים.
  - השתמשו ב-`useContext` או ספריות ניהול מצב למידע גלובלי (כמו משתמש מחובר).

## 4. מסד נתונים (Database - MySQL)

- **שמות (Naming)**: שמות טבלאות ועמודות יהיו באנגלית בלבד, בפורמט `snake_case` (למשל: `user_id`, `created_at`).
- **מפתחות**: לכל טבלה חייב להיות Primary Key (בדרך כלל `id`).
- **קידוד**: המסד והטבלאות חייבים להיות בקידוד `utf8mb4` לתמיכה מלאה בעברית.

## 5. ניהול גרסאות (Git Version Control)

- **הודעות Commit**: עבדו לפי **Conventional Commits**:
  - `feat: ...` - עבור פיצ'ר חדש.
  - `fix: ...` - עבור תיקון באג.
  - `chore: ...` - עבור תחזוקה, ניקוי, או עדכוני קונפיגורציה.
  - `docs: ...` - עבור שינויי תיעוד.
- **ענפים (Branches)**:
  - `master` - הקוד היציב שנמצא בייצור.
  - `feature/...` - ענפים לפיתוח פיצ'רים חדשים.

---

**הערה לסוכן AI**: בכל פעם שאתה כותב קוד, וודא שאתה עובר על הרשימה הזו ובודק שהקוד שלך עומד בסטנדרטים אלו.
