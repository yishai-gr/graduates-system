import{j as e,r as P,s as E,v as pe,e as je,B as fe,C as ge,y as Q,z as K,l as q,E as H,F as Y,G as Ne,H as ve,h as we,J as ye,A as be,K as Ce}from"./ui-B5gioQBr.js";import{r as l,u as ke}from"./vendor-CxWUHsYF.js";import{D as W,b as Z,B as o,d as ee,e as D,R as De,P as Se,C as se,c as S,g as Ie,T as ae,O as te,h as le,A as Re,a as Te,f as ze}from"./index-D12XCcMj.js";import{g as U}from"./graduatesService-BwZoKvl4.js";import{I as J}from"./input-CR8LgpT-.js";import{D as Fe,C as Pe}from"./ConfirmDialog-fTDVqR1k.js";import{C as Ee}from"./card-BCjA7ZFz.js";import{P as re}from"./ProfileCompletion-PxJqxJXn.js";import{T as _e,a as Me,b as z,c as F}from"./tabs-BmZYb-Fx.js";import{T as Oe,a as B,b as V,c as $}from"./tooltip-CtRrld9t.js";import"./index-ChR3hsDM.js";function Le({graduate:a,onEdit:r,onView:c,onDelete:i,canEdit:x,canDelete:m}){const u=l.useRef(0),j=()=>{const g=Date.now();g-u.current<300&&c(a),u.current=g},w=(g,h)=>{h.offset.x<-200&&x&&r(a),h.offset.x>200&&m&&i&&i(a)};return e.jsxs("div",{className:"relative",children:[x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-start rounded-lg bg-orange-100 pl-4 z-0 left-1/2 dark:bg-yellow-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-1 text-orange-600 font-bold px-2 text-sm dark:text-yellow-400",children:[e.jsx(P,{size:16}),e.jsx("span",{children:"עריכה"})]})}),m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-end rounded-lg bg-red-100 pr-4 z-0 right-1/2 dark:bg-red-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-1 text-red-600 font-bold px-2 text-sm dark:text-red-400",children:[e.jsx(E,{size:16}),e.jsx("span",{children:"מחיקה"})]})}),e.jsx(pe.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:{left:x?.2:0,right:m?.2:0},onDragEnd:w,onTap:j,className:"touch-pan-y relative z-10 bg-card rounded-lg",whileTap:{scale:.98},style:{x:0},children:e.jsxs(Ee,{className:"px-4 py-2 flex-row justify-between items-center select-none border-0 shadow-none",children:[e.jsxs("div",{className:"flex flex-col gap-1 pointer-events-none w-full overflow-hidden",children:[e.jsxs("div",{className:"font-bold text-base truncate",children:[a.first_name," ",a.last_name]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground w-full",children:[a.shiur_year&&e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(je,{size:12}),e.jsx("span",{children:a.shiur_year})]}),a.city&&e.jsxs("div",{className:"flex items-center gap-1 shrink-0 truncate max-w-[80px]",children:[e.jsx(fe,{size:12}),e.jsx("span",{className:"truncate",children:a.city})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(ge,{size:12}),e.jsx("span",{dir:"ltr",children:a.phone})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{graduate:a}),e.jsxs(W,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",className:"w-auto flex flex-row gap-2 p-2",children:[e.jsxs(D,{onClick:()=>c(a),className:"flex flex-col items-center justify-center gap-1 rounded-md bg-secondary/10 p-2 aspect-square focus:bg-secondary/20",children:[e.jsx(K,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"text-xs font-medium",children:"צפייה"})]}),x&&e.jsxs(D,{onClick:()=>r(a),className:"flex flex-col items-center justify-center gap-1 rounded-md bg-orange-50 dark:bg-orange-900/20 p-2 aspect-square focus:bg-orange-100 dark:focus:bg-orange-900/40",children:[e.jsx(P,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-xs font-medium text-orange-700 dark:text-orange-300",children:"עריכה"})]}),m&&i&&e.jsxs(D,{className:"flex flex-col items-center justify-center gap-1 rounded-md bg-red-50 dark:bg-red-900/20 p-2 aspect-square focus:bg-red-100 dark:focus:bg-red-900/40 text-destructive focus:text-destructive dark:text-red-400 dark:focus:text-red-300",onClick:()=>i(a),children:[e.jsx(E,{className:"h-6 w-6"}),e.jsx("span",{className:"text-xs font-medium",children:"מחיקה"})]})]})]})]})]})})]})}const Ge=De,Ae=Se,ne=l.forwardRef(({className:a,...r},c)=>e.jsx(te,{ref:c,className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r}));ne.displayName=te.displayName;const ie=l.forwardRef(({className:a,children:r,...c},i)=>e.jsxs(Ae,{children:[e.jsx(ne,{}),e.jsxs(se,{ref:i,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,e.jsxs(Ie,{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ie.displayName=se.displayName;const de=({className:a,...r})=>e.jsx("div",{className:S("flex flex-col space-y-1.5 text-center sm:text-right",a),...r});de.displayName="DialogHeader";const ce=({className:a,...r})=>e.jsx("div",{className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r});ce.displayName="DialogFooter";const oe=l.forwardRef(({className:a,...r},c)=>e.jsx(ae,{ref:c,className:S("text-lg font-semibold leading-none tracking-tight",a),...r}));oe.displayName=ae.displayName;const Be=l.forwardRef(({className:a,...r},c)=>e.jsx(le,{ref:c,className:S("text-sm text-muted-foreground",a),...r}));Be.displayName=le.displayName;class Ve{async previewImport(r){const c=new FormData;c.append("file",r);const i=localStorage.getItem("auth_token"),x={};i&&(x.Authorization=`Bearer ${i}`);const m="/api/v1";try{const u=await fetch(`${m}/graduates/import/preview`,{method:"POST",body:c,headers:x});if(!u.ok){const j=await u.json();throw new Error(j?.error||"Failed to preview import")}return u.json()}catch(u){throw u}}async confirmImport(r){return Re.post("/graduates/import/confirm",r)}}const X=new Ve;function $e({open:a,onOpenChange:r,onImportComplete:c}){const[i,x]=l.useState("upload"),[m,u]=l.useState(null),[j,w]=l.useState(!1),[g,h]=l.useState(null),[d,C]=l.useState(null),[N,v]=l.useState([]),[f,I]=l.useState(null),_=s=>{const n=s.target.files?.[0];if(n){const p=n.name.split(".").pop()?.toLowerCase();if(!["csv","xlsx","xls"].includes(p||"")){h("רק קבצי CSV ו-Excel (.xlsx, .xls) מותרים");return}if(n.size>50*1024*1024){h("גודל הקובץ חורג מ-50MB");return}u(n),h(null)}},k=async()=>{if(m){w(!0),h(null);try{const s=await X.previewImport(m);C(s),v(s.validRows),x("preview")}catch(s){h(s.message||"שגיאה בטעינת הקובץ")}finally{w(!1)}}},M=async()=>{if(N.length===0){h("אין שורות לייבוא");return}w(!0),h(null);try{const s=await X.confirmImport({rowsToImport:N});I(s),x("results"),c?.()}catch(s){h(s.message||"שגיאה בייבוא הנתונים")}finally{w(!1)}},y=s=>{const n=document.createElement("a");n.href=`/api/v1/graduates/import/sample/${s}`,n.download=`graduates-sample.${s}`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},T=s=>{v(n=>n.some(p=>p.row===s.row)?n.filter(p=>p.row!==s.row):[...n,s])},O=()=>{x("upload"),u(null),h(null),C(null),v([]),I(null)},b=()=>{O(),r(!1)};return e.jsx(Ge,{open:a,onOpenChange:b,children:e.jsxs(ie,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",dir:"rtl",children:[e.jsx(de,{children:e.jsx(oe,{children:"ייבוא בוגרים מקובץ"})}),g&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex gap-3",children:[e.jsx(H,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800",children:g})]}),i==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"הורדת קובץ לדוגמה"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>y("csv"),className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"הורדת דוגמה CSV"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>y("xlsx"),className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"הורדת דוגמה Excel"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"הורד קובץ דוגמה כדי לראות את הפורמט הנכון לייבוא"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"העלאת קובץ"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:_,className:"hidden",id:"file-input"}),e.jsxs("label",{htmlFor:"file-input",className:"cursor-pointer",children:[e.jsx(Ne,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:m?m.name:"בחר קובץ או גרור הנה"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"CSV או Excel (עד 50MB)"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"הערות חשובות:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"השורה הראשונה צריכה להיות כותרות העמודות"}),e.jsx("li",{children:"ניתן להעלות בפורמטים CSV ו-Excel"}),e.jsx("li",{children:"גודל הקובץ המקסימלי הוא 50MB"}),e.jsx("li",{children:"כל השדות בתעודת זהות מעובדים לאימות Luhn"}),e.jsx("li",{children:'כתובות דוא"ל וטלפונים מאומתים'}),e.jsx("li",{children:"זיהוי אוטומטי של כפילויות"})]})]})]}),i==="preview"&&d&&e.jsxs(_e,{defaultValue:"valid",className:"space-y-4",children:[e.jsxs(Me,{className:"grid w-full grid-cols-4",children:[e.jsxs(z,{value:"valid",children:["טוב (",d.summary.validRows,")"]}),e.jsxs(z,{value:"errors",children:["שגיאות (",d.summary.errorRows,")"]}),e.jsxs(z,{value:"duplicates",children:["כפולות (",d.summary.duplicateRows,")"]}),e.jsx(z,{value:"summary",children:"סיכום"})]}),e.jsxs(F,{value:"valid",className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.summary.validRows," שורות תקינות מוכנות לייבוא"]}),e.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:N.length>0?e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b bg-muted sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-right",children:e.jsx("input",{type:"checkbox",checked:N.length===d.validRows.length,onChange:s=>{s.target.checked?v(d.validRows):v([])}})}),e.jsx("th",{className:"p-2 text-right",children:"שם"}),e.jsx("th",{className:"p-2 text-right",children:'דוא"ל'}),e.jsx("th",{className:"p-2 text-right",children:"שיעור"})]})}),e.jsx("tbody",{children:d.validRows.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:e.jsx("input",{type:"checkbox",checked:N.some(n=>n.row===s.row),onChange:()=>T(s)})}),e.jsxs("td",{className:"p-2",children:[s.data.first_name," ",s.data.last_name]}),e.jsx("td",{className:"p-2",children:s.data.email||"-"}),e.jsx("td",{className:"p-2",children:s.data.shiur_year||"-"})]},s.row))})]}):e.jsx("p",{className:"p-4 text-center text-muted-foreground",children:"אין שורות תקינות"})})]}),e.jsx(F,{value:"errors",className:"space-y-4",children:d.errorRows.length>0?e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.errorRows.map(s=>e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-red-900",children:["שורה ",s.row]}),e.jsx("ul",{className:"list-disc list-inside text-sm mt-1 text-red-800",children:s.errors.map((n,p)=>e.jsx("li",{children:n},p))})]})]})},s.row))}):e.jsx("p",{className:"text-center text-muted-foreground",children:"אין שגיאות"})}),e.jsx(F,{value:"duplicates",className:"space-y-4",children:d.duplicateRows.length>0?e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.duplicateRows.map(s=>e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-yellow-900",children:["שורה ",s.row]}),e.jsxs("p",{className:"text-sm text-yellow-800",children:["כפול עבור: ",s.matchFields.join(", ")]}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["בוגר קיים עם ID: ",s.duplicateId]})]})]})},s.row))}):e.jsx("p",{className:"text-center text-muted-foreground",children:"אין כפילויות"})}),e.jsx(F,{value:"summary",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"סך הכל שורות"}),e.jsx("p",{className:"text-2xl font-bold",children:d.summary.totalRows})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"שורות תקינות"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:d.summary.validRows})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"שורות עם שגיאות"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:d.summary.errorRows})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-yellow-50",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"שורות כפולות"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:d.summary.duplicateRows})]})]})})]}),i==="results"&&f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[f.imported>0&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex gap-4",children:[e.jsx(ve,{className:"h-5 w-5 text-green-700 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-green-900",children:["בוגרים ",f.imported," יובאו בהצלחה"]})})]}),f.failed>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex gap-4",children:[e.jsx(q,{className:"h-5 w-5 text-red-700 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"font-semibold text-red-900",children:[f.failed," שורה(ות) נכשלו"]})})]}),f.failedRows.length>0&&e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:f.failedRows.map(s=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("p",{className:"font-medium text-red-900",children:["שורה ",s.row]}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-800 mt-1",children:s.errors.map((n,p)=>e.jsx("li",{children:n},p))})]},s.row))})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["הייבוא הושלם. ",f.imported+f.failed," שורות עובדו."]})})]}),e.jsxs(ce,{children:[i==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",onClick:()=>r(!1),children:"ביטול"}),e.jsx(o,{onClick:k,disabled:!m||j,children:j?"טוען...":"תצוגה מקדימה"})]}),i==="preview"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",onClick:()=>x("upload"),disabled:j,children:"חזור"}),e.jsx(o,{variant:"outline",onClick:()=>x("upload"),disabled:j,children:"בחר קובץ אחר"}),e.jsx(o,{onClick:M,disabled:N.length===0||j,children:j?"מייבא...":"אישור ייבוא"})]}),i==="results"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",onClick:b,children:"סגור"}),e.jsx(o,{onClick:b,children:"חזור לדף בוגרים"})]})]})]})})}function ss(){const{can:a,user:r,isShiurManager:c}=Te(),i=ke(),[x,m]=l.useState([]),[u,j]=l.useState(0),[w,g]=l.useState(!1),[h,d]=l.useState(0),[C,N]=l.useState(1),[v,f]=l.useState(""),[I,_]=l.useState(""),[k,M]=l.useState(""),[y,T]=l.useState(null),[O,b]=l.useState(!1),[s,n]=l.useState(!1);l.useEffect(()=>{},[]),l.useEffect(()=>{const t=setTimeout(()=>{_(v),N(1)},500);return()=>clearTimeout(t)},[v]),l.useEffect(()=>{let t=!1;return(async()=>{g(!0);try{const R=await U.getGraduates({page:C,pageSize:20,search:I,shiurYear:k||void 0,myShiurs:c?r?.shiurs:void 0});t||(m(R.data),j(R.total))}finally{t||g(!1)}})(),()=>{t=!0}},[C,I,k,c,h]);const p=t=>{i(`/graduates/${t.id}/edit`)},xe=()=>{i("/graduates/new")},L=t=>{i(`/graduates/${t.id}`)},G=t=>{T(t),b(!0)},me=async()=>{y&&(await U.deleteGraduate(y.id),b(!1),T(null),d(t=>t+1))},he=a("create","graduates"),ue=[{header:"שם מלא",cell:t=>e.jsxs("div",{className:"font-medium",children:[t.first_name," ",t.last_name]})},{header:"פלאפון",accessorKey:"phone"},{header:"עיר",accessorKey:"city"},{header:"מחזור",accessorKey:"shiur_year",cell:t=>t.shiur_year||"ללא מחזור"},{header:"סטטוס",cell:t=>e.jsx(re,{graduate:t})},{header:"פעולות",cell:t=>{const A=a("update","graduates",t),R=a("delete","graduates");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:flex justify-end gap-2",children:e.jsxs(Oe,{children:[e.jsxs(B,{children:[e.jsx(V,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>L(t),children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsx($,{children:e.jsx("p",{children:"צפייה"})})]}),A&&e.jsxs(B,{children:[e.jsx(V,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>p(t),children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsx($,{children:e.jsx("p",{children:"עריכה"})})]}),R&&e.jsxs(B,{children:[e.jsx(V,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>G(t),children:e.jsx(E,{className:"h-4 w-4"})})}),e.jsx($,{children:e.jsx("p",{children:"מחיקה"})})]})]})}),e.jsx("div",{className:"flex md:hidden justify-end",children:e.jsxs(W,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",children:[e.jsx(ze,{children:"פעולות"}),e.jsxs(D,{onClick:()=>L(t),children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," צפייה"]}),A&&e.jsxs(D,{onClick:()=>p(t),children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," עריכה"]}),R&&e.jsxs(D,{onClick:()=>G(t),className:"text-destructive focus:text-destructive",children:[e.jsx(E,{className:"mr-2 h-4 w-4"})," מחיקה"]})]})]})})]})}}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"ניהול בוגרים"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[he&&e.jsxs(o,{onClick:xe,className:"flex-1 sm:flex-none",children:[e.jsx(we,{className:"h-4 w-4"}),"רישום בוגר חדש"]}),a("import","graduates")&&e.jsxs(o,{variant:"outline",onClick:()=>n(!0),className:"flex-1 sm:flex-none",children:[e.jsx(ye,{className:"h-4 w-4"}),"ייבוא מקובץ"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(be,{className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(J,{placeholder:"חיפוש לפי שם...",className:"pr-9",value:v,onChange:t=>f(t.target.value)})]}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(J,{type:"text",placeholder:"סינון לפי מחזור (לדוגמה: נח)",className:"pr-9",value:k,onChange:t=>M(t.target.value)})]})})]}),e.jsx(Fe,{data:x,columns:ue,total:u,page:C,pageSize:20,onPageChange:N,isLoading:w,mobileRenderer:t=>e.jsx(Le,{graduate:t,onEdit:p,onView:L,onDelete:a("delete","graduates")?G:void 0,canEdit:a("update","graduates",t),canDelete:a("delete","graduates")})}),e.jsx(Pe,{open:O,onOpenChange:b,title:"מחיקת בוגר",description:e.jsxs(e.Fragment,{children:["האם אתה בטוח שברצונך למחוק את הבוגר"," ",e.jsxs("strong",{children:[y?.first_name," ",y?.last_name]}),"? פעולה זו אינה הפיכה."]}),onConfirm:me,variant:"destructive",confirmText:"מחק"}),e.jsx($e,{open:s,onOpenChange:n,onImportComplete:()=>d(t=>t+1)})]})}export{ss as default};
