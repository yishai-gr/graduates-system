import{u as it,j as e,U as lt,H as ct,Q as dt,N as ut,o as Ee,P as pt,p as ft}from"./ui-B5gioQBr.js";import{r,i as mt,u as ht}from"./vendor-CxWUHsYF.js";import{o as Ae,p as _e,q as gt,k as vt,r as je,N as xt,j as k,t as St,s as O,l as E,Q as $,w as wt,S as Oe,U as Ct,x as yt,E as It,y as bt,z as Nt,F as Tt,G as jt,H as Pt,I as Et,c as oe,a as _t,B as we}from"./index-D12XCcMj.js";import{u as Ce}from"./usersService-CeZI1HrA.js";import{I as ce}from"./input-CR8LgpT-.js";import{L as se}from"./label-CcgP3KIH.js";import{V as Rt}from"./index-ChR3hsDM.js";function Mt(t){const n=r.useRef({value:t,previous:t});return r.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}function Re(t,[n,o]){return Math.min(o,Math.max(n,t))}var At=[" ","Enter","ArrowUp","ArrowDown"],Ot=[" ","Enter"],J="Select",[ue,pe,Dt]=xt(J),[ne]=vt(J,[Dt,Ae]),fe=Ae(),[Lt,q]=ne(J),[kt,Bt]=ne(J),De=t=>{const{__scopeSelect:n,children:o,open:l,defaultOpen:a,onOpenChange:u,value:s,defaultValue:i,onValueChange:c,dir:p,name:v,autoComplete:S,disabled:N,required:I,form:C}=t,d=fe(n),[h,w]=r.useState(null),[f,g]=r.useState(null),[x,_]=r.useState(!1),z=it(p),[P,R]=_e({prop:l,defaultProp:a??!1,onChange:u,caller:J}),[W,X]=_e({prop:s,defaultProp:i,onChange:c,caller:J}),B=r.useRef(null),V=h?C||!!h.closest("form"):!0,[K,H]=r.useState(new Set),F=Array.from(K).map(M=>M.props.value).join(";");return e.jsx(gt,{...d,children:e.jsxs(Lt,{required:I,scope:n,trigger:h,onTriggerChange:w,valueNode:f,onValueNodeChange:g,valueNodeHasChildren:x,onValueNodeHasChildrenChange:_,contentId:je(),value:W,onValueChange:X,open:P,onOpenChange:R,dir:z,triggerPointerDownPosRef:B,disabled:N,children:[e.jsx(ue.Provider,{scope:n,children:e.jsx(kt,{scope:t.__scopeSelect,onNativeOptionAdd:r.useCallback(M=>{H(L=>new Set(L).add(M))},[]),onNativeOptionRemove:r.useCallback(M=>{H(L=>{const U=new Set(L);return U.delete(M),U})},[]),children:o})}),V?e.jsxs(nt,{"aria-hidden":!0,required:I,tabIndex:-1,name:v,autoComplete:S,value:W,onChange:M=>X(M.target.value),disabled:N,form:C,children:[W===void 0?e.jsx("option",{value:""}):null,Array.from(K)]},F):null]})})};De.displayName=J;var Le="SelectTrigger",ke=r.forwardRef((t,n)=>{const{__scopeSelect:o,disabled:l=!1,...a}=t,u=fe(o),s=q(Le,o),i=s.disabled||l,c=k(n,s.onTriggerChange),p=pe(o),v=r.useRef("touch"),[S,N,I]=st(d=>{const h=p().filter(g=>!g.disabled),w=h.find(g=>g.value===s.value),f=at(h,d,w);f!==void 0&&s.onValueChange(f.value)}),C=d=>{i||(s.onOpenChange(!0),I()),d&&(s.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(St,{asChild:!0,...u,children:e.jsx(O.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":rt(s.value)?"":void 0,...a,ref:c,onClick:E(a.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&C(d)}),onPointerDown:E(a.onPointerDown,d=>{v.current=d.pointerType;const h=d.target;h.hasPointerCapture(d.pointerId)&&h.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(C(d),d.preventDefault())}),onKeyDown:E(a.onKeyDown,d=>{const h=S.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&N(d.key),!(h&&d.key===" ")&&At.includes(d.key)&&(C(),d.preventDefault())})})})});ke.displayName=Le;var Be="SelectValue",Ve=r.forwardRef((t,n)=>{const{__scopeSelect:o,className:l,style:a,children:u,placeholder:s="",...i}=t,c=q(Be,o),{onValueNodeHasChildrenChange:p}=c,v=u!==void 0,S=k(n,c.onValueNodeChange);return $(()=>{p(v)},[p,v]),e.jsx(O.span,{...i,ref:S,style:{pointerEvents:"none"},children:rt(c.value)?e.jsx(e.Fragment,{children:s}):u})});Ve.displayName=Be;var Vt="SelectIcon",He=r.forwardRef((t,n)=>{const{__scopeSelect:o,children:l,...a}=t;return e.jsx(O.span,{"aria-hidden":!0,...a,ref:n,children:l||"▼"})});He.displayName=Vt;var Ht="SelectPortal",Fe=t=>e.jsx(wt,{asChild:!0,...t});Fe.displayName=Ht;var ee="SelectContent",Ue=r.forwardRef((t,n)=>{const o=q(ee,t.__scopeSelect),[l,a]=r.useState();if($(()=>{a(new DocumentFragment)},[]),!o.open){const u=l;return u?Oe.createPortal(e.jsx(ze,{scope:t.__scopeSelect,children:e.jsx(ue.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(We,{...t,ref:n})});Ue.displayName=ee;var D=10,[ze,Y]=ne(ee),Ft="SelectContentImpl",Ut=Nt("SelectContent.RemoveScroll"),We=r.forwardRef((t,n)=>{const{__scopeSelect:o,position:l="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:s,side:i,sideOffset:c,align:p,alignOffset:v,arrowPadding:S,collisionBoundary:N,collisionPadding:I,sticky:C,hideWhenDetached:d,avoidCollisions:h,...w}=t,f=q(ee,o),[g,x]=r.useState(null),[_,z]=r.useState(null),P=k(n,m=>x(m)),[R,W]=r.useState(null),[X,B]=r.useState(null),V=pe(o),[K,H]=r.useState(!1),F=r.useRef(!1);r.useEffect(()=>{if(g)return yt(g)},[g]),It();const M=r.useCallback(m=>{const[T,...A]=V().map(j=>j.ref.current),[y]=A.slice(-1),b=document.activeElement;for(const j of m)if(j===b||(j?.scrollIntoView({block:"nearest"}),j===T&&_&&(_.scrollTop=0),j===y&&_&&(_.scrollTop=_.scrollHeight),j?.focus(),document.activeElement!==b))return},[V,_]),L=r.useCallback(()=>M([R,g]),[M,R,g]);r.useEffect(()=>{K&&L()},[K,L]);const{onOpenChange:U,triggerPointerDownPosRef:G}=f;r.useEffect(()=>{if(g){let m={x:0,y:0};const T=y=>{m={x:Math.abs(Math.round(y.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(y.pageY)-(G.current?.y??0))}},A=y=>{m.x<=10&&m.y<=10?y.preventDefault():g.contains(y.target)||U(!1),document.removeEventListener("pointermove",T),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",A,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",A,{capture:!0})}}},[g,U,G]),r.useEffect(()=>{const m=()=>U(!1);return window.addEventListener("blur",m),window.addEventListener("resize",m),()=>{window.removeEventListener("blur",m),window.removeEventListener("resize",m)}},[U]);const[me,ie]=st(m=>{const T=V().filter(b=>!b.disabled),A=T.find(b=>b.ref.current===document.activeElement),y=at(T,m,A);y&&setTimeout(()=>y.ref.current.focus())}),he=r.useCallback((m,T,A)=>{const y=!F.current&&!A;(f.value!==void 0&&f.value===T||y)&&(W(m),y&&(F.current=!0))},[f.value]),ge=r.useCallback(()=>g?.focus(),[g]),te=r.useCallback((m,T,A)=>{const y=!F.current&&!A;(f.value!==void 0&&f.value===T||y)&&B(m)},[f.value]),le=l==="popper"?ye:Ke,re=le===ye?{side:i,sideOffset:c,align:p,alignOffset:v,arrowPadding:S,collisionBoundary:N,collisionPadding:I,sticky:C,hideWhenDetached:d,avoidCollisions:h}:{};return e.jsx(ze,{scope:o,content:g,viewport:_,onViewportChange:z,itemRefCallback:he,selectedItem:R,onItemLeave:ge,itemTextRefCallback:te,focusSelectedItem:L,selectedItemText:X,position:l,isPositioned:K,searchRef:me,children:e.jsx(bt,{as:Ut,allowPinchZoom:!0,children:e.jsx(Tt,{asChild:!0,trapped:f.open,onMountAutoFocus:m=>{m.preventDefault()},onUnmountAutoFocus:E(a,m=>{f.trigger?.focus({preventScroll:!0}),m.preventDefault()}),children:e.jsx(jt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:s,onFocusOutside:m=>m.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:m=>m.preventDefault(),...w,...re,onPlaced:()=>H(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:E(w.onKeyDown,m=>{const T=m.ctrlKey||m.altKey||m.metaKey;if(m.key==="Tab"&&m.preventDefault(),!T&&m.key.length===1&&ie(m.key),["ArrowUp","ArrowDown","Home","End"].includes(m.key)){let y=V().filter(b=>!b.disabled).map(b=>b.ref.current);if(["ArrowUp","End"].includes(m.key)&&(y=y.slice().reverse()),["ArrowUp","ArrowDown"].includes(m.key)){const b=m.target,j=y.indexOf(b);y=y.slice(j+1)}setTimeout(()=>M(y)),m.preventDefault()}})})})})})})});We.displayName=Ft;var zt="SelectItemAlignedPosition",Ke=r.forwardRef((t,n)=>{const{__scopeSelect:o,onPlaced:l,...a}=t,u=q(ee,o),s=Y(ee,o),[i,c]=r.useState(null),[p,v]=r.useState(null),S=k(n,P=>v(P)),N=pe(o),I=r.useRef(!1),C=r.useRef(!0),{viewport:d,selectedItem:h,selectedItemText:w,focusSelectedItem:f}=s,g=r.useCallback(()=>{if(u.trigger&&u.valueNode&&i&&p&&d&&h&&w){const P=u.trigger.getBoundingClientRect(),R=p.getBoundingClientRect(),W=u.valueNode.getBoundingClientRect(),X=w.getBoundingClientRect();if(u.dir!=="rtl"){const b=X.left-R.left,j=W.left-b,Z=P.left-j,Q=P.width+Z,ve=Math.max(Q,R.width),xe=window.innerWidth-D,Se=Re(j,[D,Math.max(D,xe-ve)]);i.style.minWidth=Q+"px",i.style.left=Se+"px"}else{const b=R.right-X.right,j=window.innerWidth-W.right-b,Z=window.innerWidth-P.right-j,Q=P.width+Z,ve=Math.max(Q,R.width),xe=window.innerWidth-D,Se=Re(j,[D,Math.max(D,xe-ve)]);i.style.minWidth=Q+"px",i.style.right=Se+"px"}const B=N(),V=window.innerHeight-D*2,K=d.scrollHeight,H=window.getComputedStyle(p),F=parseInt(H.borderTopWidth,10),M=parseInt(H.paddingTop,10),L=parseInt(H.borderBottomWidth,10),U=parseInt(H.paddingBottom,10),G=F+M+K+U+L,me=Math.min(h.offsetHeight*5,G),ie=window.getComputedStyle(d),he=parseInt(ie.paddingTop,10),ge=parseInt(ie.paddingBottom,10),te=P.top+P.height/2-D,le=V-te,re=h.offsetHeight/2,m=h.offsetTop+re,T=F+M+m,A=G-T;if(T<=te){const b=B.length>0&&h===B[B.length-1].ref.current;i.style.bottom="0px";const j=p.clientHeight-d.offsetTop-d.offsetHeight,Z=Math.max(le,re+(b?ge:0)+j+L),Q=T+Z;i.style.height=Q+"px"}else{const b=B.length>0&&h===B[0].ref.current;i.style.top="0px";const Z=Math.max(te,F+d.offsetTop+(b?he:0)+re)+A;i.style.height=Z+"px",d.scrollTop=T-te+d.offsetTop}i.style.margin=`${D}px 0`,i.style.minHeight=me+"px",i.style.maxHeight=V+"px",l?.(),requestAnimationFrame(()=>I.current=!0)}},[N,u.trigger,u.valueNode,i,p,d,h,w,u.dir,l]);$(()=>g(),[g]);const[x,_]=r.useState();$(()=>{p&&_(window.getComputedStyle(p).zIndex)},[p]);const z=r.useCallback(P=>{P&&C.current===!0&&(g(),f?.(),C.current=!1)},[g,f]);return e.jsx(Kt,{scope:o,contentWrapper:i,shouldExpandOnScrollRef:I,onScrollButtonChange:z,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:e.jsx(O.div,{...a,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ke.displayName=zt;var Wt="SelectPopperPosition",ye=r.forwardRef((t,n)=>{const{__scopeSelect:o,align:l="start",collisionPadding:a=D,...u}=t,s=fe(o);return e.jsx(Pt,{...s,...u,ref:n,align:l,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ye.displayName=Wt;var[Kt,Pe]=ne(ee,{}),Ie="SelectViewport",Ge=r.forwardRef((t,n)=>{const{__scopeSelect:o,nonce:l,...a}=t,u=Y(Ie,o),s=Pe(Ie,o),i=k(n,u.onViewportChange),c=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(ue.Slot,{scope:o,children:e.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:E(a.onScroll,p=>{const v=p.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:N}=s;if(N?.current&&S){const I=Math.abs(c.current-v.scrollTop);if(I>0){const C=window.innerHeight-D*2,d=parseFloat(S.style.minHeight),h=parseFloat(S.style.height),w=Math.max(d,h);if(w<C){const f=w+I,g=Math.min(C,f),x=f-g;S.style.height=g+"px",S.style.bottom==="0px"&&(v.scrollTop=x>0?x:0,S.style.justifyContent="flex-end")}}}c.current=v.scrollTop})})})]})});Ge.displayName=Ie;var $e="SelectGroup",[Gt,$t]=ne($e),qt=r.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,a=je();return e.jsx(Gt,{scope:o,id:a,children:e.jsx(O.div,{role:"group","aria-labelledby":a,...l,ref:n})})});qt.displayName=$e;var qe="SelectLabel",Yt=r.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,a=$t(qe,o);return e.jsx(O.div,{id:a.id,...l,ref:n})});Yt.displayName=qe;var de="SelectItem",[Xt,Ye]=ne(de),Xe=r.forwardRef((t,n)=>{const{__scopeSelect:o,value:l,disabled:a=!1,textValue:u,...s}=t,i=q(de,o),c=Y(de,o),p=i.value===l,[v,S]=r.useState(u??""),[N,I]=r.useState(!1),C=k(n,f=>c.itemRefCallback?.(f,l,a)),d=je(),h=r.useRef("touch"),w=()=>{a||(i.onValueChange(l),i.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Xt,{scope:o,value:l,disabled:a,textId:d,isSelected:p,onItemTextChange:r.useCallback(f=>{S(g=>g||(f?.textContent??"").trim())},[]),children:e.jsx(ue.ItemSlot,{scope:o,value:l,disabled:a,textValue:v,children:e.jsx(O.div,{role:"option","aria-labelledby":d,"data-highlighted":N?"":void 0,"aria-selected":p&&N,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:C,onFocus:E(s.onFocus,()=>I(!0)),onBlur:E(s.onBlur,()=>I(!1)),onClick:E(s.onClick,()=>{h.current!=="mouse"&&w()}),onPointerUp:E(s.onPointerUp,()=>{h.current==="mouse"&&w()}),onPointerDown:E(s.onPointerDown,f=>{h.current=f.pointerType}),onPointerMove:E(s.onPointerMove,f=>{h.current=f.pointerType,a?c.onItemLeave?.():h.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:E(s.onPointerLeave,f=>{f.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:E(s.onKeyDown,f=>{c.searchRef?.current!==""&&f.key===" "||(Ot.includes(f.key)&&w(),f.key===" "&&f.preventDefault())})})})})});Xe.displayName=de;var ae="SelectItemText",Ze=r.forwardRef((t,n)=>{const{__scopeSelect:o,className:l,style:a,...u}=t,s=q(ae,o),i=Y(ae,o),c=Ye(ae,o),p=Bt(ae,o),[v,S]=r.useState(null),N=k(n,w=>S(w),c.onItemTextChange,w=>i.itemTextRefCallback?.(w,c.value,c.disabled)),I=v?.textContent,C=r.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:I},c.value),[c.disabled,c.value,I]),{onNativeOptionAdd:d,onNativeOptionRemove:h}=p;return $(()=>(d(C),()=>h(C)),[d,h,C]),e.jsxs(e.Fragment,{children:[e.jsx(O.span,{id:c.textId,...u,ref:N}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Oe.createPortal(u.children,s.valueNode):null]})});Ze.displayName=ae;var Qe="SelectItemIndicator",Je=r.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t;return Ye(Qe,o).isSelected?e.jsx(O.span,{"aria-hidden":!0,...l,ref:n}):null});Je.displayName=Qe;var be="SelectScrollUpButton",et=r.forwardRef((t,n)=>{const o=Y(be,t.__scopeSelect),l=Pe(be,t.__scopeSelect),[a,u]=r.useState(!1),s=k(n,l.onScrollButtonChange);return $(()=>{if(o.viewport&&o.isPositioned){let i=function(){const p=c.scrollTop>0;u(p)};const c=o.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),a?e.jsx(ot,{...t,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=o;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});et.displayName=be;var Ne="SelectScrollDownButton",tt=r.forwardRef((t,n)=>{const o=Y(Ne,t.__scopeSelect),l=Pe(Ne,t.__scopeSelect),[a,u]=r.useState(!1),s=k(n,l.onScrollButtonChange);return $(()=>{if(o.viewport&&o.isPositioned){let i=function(){const p=c.scrollHeight-c.clientHeight,v=Math.ceil(c.scrollTop)<p;u(v)};const c=o.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),a?e.jsx(ot,{...t,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=o;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});tt.displayName=Ne;var ot=r.forwardRef((t,n)=>{const{__scopeSelect:o,onAutoScroll:l,...a}=t,u=Y("SelectScrollButton",o),s=r.useRef(null),i=pe(o),c=r.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return r.useEffect(()=>()=>c(),[c]),$(()=>{i().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[i]),e.jsx(O.div,{"aria-hidden":!0,...a,ref:n,style:{flexShrink:0,...a.style},onPointerDown:E(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(l,50))}),onPointerMove:E(a.onPointerMove,()=>{u.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(l,50))}),onPointerLeave:E(a.onPointerLeave,()=>{c()})})}),Zt="SelectSeparator",Qt=r.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t;return e.jsx(O.div,{"aria-hidden":!0,...l,ref:n})});Qt.displayName=Zt;var Te="SelectArrow",Jt=r.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,a=fe(o),u=q(Te,o),s=Y(Te,o);return u.open&&s.position==="popper"?e.jsx(Et,{...a,...l,ref:n}):null});Jt.displayName=Te;var eo="SelectBubbleInput",nt=r.forwardRef(({__scopeSelect:t,value:n,...o},l)=>{const a=r.useRef(null),u=k(l,a),s=Mt(n);return r.useEffect(()=>{const i=a.current;if(!i)return;const c=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==n&&v){const S=new Event("change",{bubbles:!0});v.call(i,n),i.dispatchEvent(S)}},[s,n]),e.jsx(O.select,{...o,style:{...Rt,...o.style},ref:u,defaultValue:n})});nt.displayName=eo;function rt(t){return t===""||t===void 0}function st(t){const n=Ct(t),o=r.useRef(""),l=r.useRef(0),a=r.useCallback(s=>{const i=o.current+s;n(i),(function c(p){o.current=p,window.clearTimeout(l.current),p!==""&&(l.current=window.setTimeout(()=>c(""),1e3))})(i)},[n]),u=r.useCallback(()=>{o.current="",window.clearTimeout(l.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),[o,a,u]}function at(t,n,o){const a=n.length>1&&Array.from(n).every(p=>p===n[0])?n[0]:n,u=o?t.indexOf(o):-1;let s=to(t,Math.max(u,0));a.length===1&&(s=s.filter(p=>p!==o));const c=s.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==o?c:void 0}function to(t,n){return t.map((o,l)=>t[(n+l)%t.length])}var oo=De,no=ke,ro=Ve,so=He,ao=Fe,io=Ue,lo=Ge,co=Xe,uo=Ze,po=Je,fo=et,mo=tt;function ho({...t}){return e.jsx(oo,{"data-slot":"select",...t})}function go({...t}){return e.jsx(ro,{"data-slot":"select-value",...t})}function vo({className:t,size:n="default",children:o,...l}){return e.jsxs(no,{"data-slot":"select-trigger","data-size":n,className:oe("border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 gap-1.5 rounded-md border bg-transparent py-2 pr-2 pl-2.5 text-sm shadow-xs transition-[color,box-shadow] focus-visible:ring-[3px] aria-invalid:ring-[3px] data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:flex *:data-[slot=select-value]:gap-1.5 [&_svg:not([class*='size-'])]:size-4 flex w-fit items-center justify-between whitespace-nowrap outline-none disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...l,children:[o,e.jsx(so,{asChild:!0,children:e.jsx(lt,{className:"text-muted-foreground size-4 pointer-events-none"})})]})}function xo({className:t,children:n,position:o="item-aligned",align:l="center",...a}){return e.jsx(ao,{children:e.jsxs(io,{"data-slot":"select-content","data-align-trigger":o==="item-aligned",className:oe("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 min-w-36 rounded-md shadow-md ring-1 duration-100 relative z-50 max-h-(--radix-select-content-available-height) origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto data-[align-trigger=true]:animate-none",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,align:l,...a,children:[e.jsx(So,{}),e.jsx(lo,{"data-position":o,className:oe("data-[position=popper]:h-[var(--radix-select-trigger-height)] data-[position=popper]:w-full data-[position=popper]:min-w-[var(--radix-select-trigger-width)]",o==="popper"&&""),children:n}),e.jsx(wo,{})]})})}function Me({className:t,children:n,...o}){return e.jsxs(co,{"data-slot":"select-item",className:oe("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 relative flex w-full cursor-default items-center outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...o,children:[e.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center",children:e.jsx(po,{children:e.jsx(ct,{className:"pointer-events-none"})})}),e.jsx(uo,{children:n})]})}function So({className:t,...n}){return e.jsx(fo,{"data-slot":"select-scroll-up-button",className:oe("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",t),...n,children:e.jsx(dt,{})})}function wo({className:t,...n}){return e.jsx(mo,{"data-slot":"select-scroll-down-button",className:oe("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4",t),...n,children:e.jsx(ut,{})})}function Po(){const{id:t}=mt(),n=ht(),{isSuperAdmin:o}=_t(),[l,a]=r.useState(""),[u,s]=r.useState(""),[i,c]=r.useState(""),[p,v]=r.useState("shiur_manager"),[S,N]=r.useState(""),[I,C]=r.useState(!1),[d,h]=r.useState(!!t),[w,f]=r.useState("");r.useEffect(()=>{if(!o){n("/unauthorized");return}t?(h(!0),Ce.getUserById(t).then(x=>{a(x.firstName),s(x.lastName),c(x.email),v(x.role),N(x.shiurs?.join(", ")||"")}).catch(x=>{console.error(x),f("לא ניתן לטעון את פרטי המשתמש")}).finally(()=>{h(!1)})):h(!1)},[t,o,n]);const g=async x=>{x.preventDefault(),f(""),C(!0);try{if(!l||!u||!i)throw new Error("נא למלא את כל השדות החובה");const _=p==="shiur_manager"&&S?S.split(",").map(R=>R.trim()).filter(R=>R!==""):void 0,z={firstName:l,lastName:u,email:i,role:p,shiurs:_};let P=t;t?await Ce.updateUser(t,z):P=(await Ce.createUser(z)).id,n(t?"/users":`/users/${P}/password`)}catch(_){f(_.message||"אירעה שגיאה בשמירת הנתונים")}finally{C(!1)}};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Ee,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"max-w-xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(we,{variant:"ghost",size:"icon",onClick:()=>n("/users"),children:e.jsx(pt,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold",children:t?"עריכת פרטי משתמש":"הוספת משתמש חדש"})]}),e.jsx("div",{className:"bg-card border rounded-lg p-6 shadow-sm",children:e.jsxs("form",{onSubmit:g,className:"grid gap-6",children:[w&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-destructive/15 p-3 text-sm text-destructive",children:[e.jsx(ft,{size:18}),e.jsx("span",{children:w})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(se,{htmlFor:"firstName",children:"שם פרטי"}),e.jsx(ce,{id:"firstName",value:l,onChange:x=>a(x.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(se,{htmlFor:"lastName",children:"שם משפחה"}),e.jsx(ce,{id:"lastName",value:u,onChange:x=>s(x.target.value),required:!0})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(se,{htmlFor:"email",children:"אימייל"}),e.jsx(ce,{id:"email",type:"email",value:i,onChange:x=>c(x.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(se,{htmlFor:"role",children:"תפקיד"}),e.jsxs(ho,{value:p,onValueChange:x=>v(x),children:[e.jsx(vo,{id:"role",className:"w-full",children:e.jsx(go,{placeholder:"בחר תפקיד"})}),e.jsxs(xo,{children:[e.jsx(Me,{value:"shiur_manager",children:"אחראי שיעור"}),e.jsx(Me,{value:"super_admin",children:"מנהל ראשי"})]})]})]}),p==="shiur_manager"&&e.jsxs("div",{className:"grid gap-2 animate-in fade-in duration-300",children:[e.jsx(se,{htmlFor:"shiurs",children:"מחזורים (מופרדים בפסיק: נט, פד)"}),e.jsx(ce,{id:"shiurs",value:S,onChange:x=>N(x.target.value),placeholder:"לדוגמה: נט, פד"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(we,{type:"button",variant:"outline",onClick:()=>n("/users"),disabled:I,children:"ביטול"}),e.jsxs(we,{type:"submit",disabled:I,children:[I&&e.jsx(Ee,{className:"ml-2 h-4 w-4 animate-spin"}),t?"שמור שינויים":"צור משתמש"]})]})]})})]})}export{Po as default};
