import{j as e,o as f,K as N,r as g,C as d,M as v,B as l,J as b,N as y,O as w}from"./ui-cYaPCmFq.js";import{i as I,u as _,r as n}from"./vendor-CxWUHsYF.js";import{g as P}from"./graduatesService-Dd9FJ9M0.js";import{a as C,B as c}from"./index-B82nMEN1.js";import{P as $}from"./ProfileCompletion-BXO5cyMM.js";import{y as E,j as M,H as k,x as m}from"./calendar-C1b0yMA8.js";import"./tooltip-DPo-ytnn.js";import"./index-CGUgPmau.js";function B(a){if(!a)return"";const r=E(a,"yyyy-MM-dd",new Date);if(!M(r))return a;try{const t=new k(r),s=r.toLocaleString("he-IL",{calendar:"hebrew",month:"long"});return`${m(t.getDate())} ${s} ${m(t.getFullYear())}`}catch(t){return console.error("Error formatting Hebrew date:",t),a}}function A(){const{id:a}=I(),r=_(),{can:t}=C(),[s,o]=n.useState(null),[x,h]=n.useState(!0),[i,u]=n.useState("");if(n.useEffect(()=>{a&&P.getGraduateById(a).then(o).catch(j=>{console.error(j),u("לא ניתן לטעון את פרטי הבוגר")}).finally(()=>h(!1))},[a]),x)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})});if(i||!s)return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4 text-center",children:[e.jsx("p",{className:"text-destructive font-medium mb-4",children:i||"בוגר לא נמצא"}),e.jsx(c,{onClick:()=>r("/graduates"),children:"חזרה לרשימה"})]});const p=t("update","graduates",s);return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>r("/graduates"),children:e.jsx(N,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:[s.first_name," ",s.last_name]}),s.student_code&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["קוד תלמיד: ",s.student_code]})]})]}),e.jsx("div",{children:p&&e.jsxs(c,{variant:"outline",onClick:()=>r(`/graduates/${s.id}/edit`),children:[e.jsx(g,{className:"h-4 w-4 ml-2"}),"עריכה"]})})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 shadow-sm space-y-8",children:[e.jsx("div",{className:"pb-6 border-b",children:e.jsx($,{graduate:s})}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"פרטי קשר"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"נייד:"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:underline",dir:"ltr",children:s.phone||"-"})]}),s.home_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"בית:"}),e.jsx("a",{href:`tel:${s.home_phone}`,className:"hover:underline",dir:"ltr",children:s.home_phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"אימייל:"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:underline",children:s.email||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"כתובת ומגורים"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"עיר:"}),e.jsx("span",{children:s.city||"-"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(l,{className:"h-4 w-4 text-muted-foreground mt-1 opacity-0"}),e.jsx("span",{className:"font-medium",children:"כתובת:"}),e.jsx("span",{children:s.address||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"פרטים אישיים"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"מחזור:"}),e.jsx("span",{children:s.shiur_year||"ללא מחזור"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"ת.ז:"}),e.jsx("span",{children:s.teudat_zehut||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"תאריך לידה:"}),e.jsx("span",{children:s.birth_date?B(s.birth_date):"-"})]})]})]}),s.notes&&e.jsxs("div",{className:"space-y-4 md:col-span-2",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"הערות"}),e.jsx("p",{className:"whitespace-pre-wrap text-sm bg-muted/30 p-4 rounded-md",children:s.notes})]})]})]})]})}export{A as default};
