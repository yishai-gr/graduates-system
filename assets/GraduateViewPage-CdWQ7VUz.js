import{a as n,j as e,v as f,_ as N,y as g,N as l,$ as v,a0 as d,Y as b,a1 as y,a2 as w}from"./ui-J8zN8ojh.js";import{d as _,u as I}from"./vendor-DK4z8uX1.js";import{g as $}from"./graduatesService-B-eS1lEg.js";import{a as P,B as c}from"./index-DNpSr7TS.js";import{P as C}from"./ProfileCompletion-Dx7uhK2Z.js";import{H as E,g as m}from"./calendar-A3vjW2LN.js";import{x as D,j as k}from"./parse-j4cdIc96.js";import{u as H}from"./useDocumentTitle-mo0ffS8w.js";function L(a){if(!a)return"";const t=D(a,"yyyy-MM-dd",new Date);if(!k(t))return a;try{const r=new E(t),s=t.toLocaleString("he-IL",{calendar:"hebrew",month:"long"});return`${m(r.getDate())} ${s} ${m(r.getFullYear())}`}catch(r){return console.error("Error formatting Hebrew date:",r),a}}function A(){const{id:a}=_(),t=I(),{can:r}=P(),[s,o]=n.useState(null);H(s?`${s.first_name} ${s.last_name}`:"פרטי בוגר");const[x,h]=n.useState(!0),[i,u]=n.useState("");if(n.useEffect(()=>{a&&$.getGraduateById(a).then(o).catch(j=>{console.error(j),u("לא ניתן לטעון את פרטי הבוגר")}).finally(()=>h(!1))},[a]),x)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})});if(i||!s)return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4 text-center",children:[e.jsx("p",{className:"text-destructive font-medium mb-4",children:i||"בוגר לא נמצא"}),e.jsx(c,{onClick:()=>t("/graduates"),children:"חזרה לרשימה"})]});const p=r("update","graduates",s);return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>t("/graduates"),children:e.jsx(N,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:[s.first_name," ",s.last_name]}),s.student_code&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["קוד תלמיד: ",s.student_code]})]})]}),e.jsx("div",{children:p&&e.jsxs(c,{variant:"outline",onClick:()=>t(`/graduates/${s.id}/edit`),children:[e.jsx(g,{className:"h-4 w-4 ml-2"}),"עריכה"]})})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 shadow-sm space-y-8",children:[e.jsx("div",{className:"pb-6 border-b",children:e.jsx(C,{graduate:s})}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"פרטי קשר"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"נייד:"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:underline",dir:"ltr",children:s.phone||"-"})]}),s.home_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"בית:"}),e.jsx("a",{href:`tel:${s.home_phone}`,className:"hover:underline",dir:"ltr",children:s.home_phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"אימייל:"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:underline",children:s.email||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"כתובת ומגורים"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"עיר:"}),e.jsx("span",{children:s.city||"-"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-muted-foreground mt-1 opacity-0"}),e.jsx("span",{className:"font-medium",children:"כתובת:"}),e.jsx("span",{children:s.address||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"פרטים אישיים"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"מחזור:"}),e.jsx("span",{children:s.shiur_year||"ללא מחזור"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"ת.ז:"}),e.jsx("span",{children:s.teudat_zehut||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"תאריך לידה:"}),e.jsx("span",{children:s.birth_date?L(s.birth_date):"-"})]})]})]}),s.notes&&e.jsxs("div",{className:"space-y-4 md:col-span-2",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"הערות"}),e.jsx("p",{className:"whitespace-pre-wrap text-sm bg-muted/30 p-4 rounded-md",children:s.notes})]})]})]})]})}export{A as default};
